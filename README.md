# policy_analysis_systemğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªé¢å‘é‡‘èæŠ•èµ„é¢†åŸŸçš„ç«¯åˆ°ç«¯æ”¿ç­–åˆ†ææ™ºèƒ½ç³»ç»Ÿï¼Œèåˆäº†**RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰**ã€**å‘é‡æ•°æ®åº“**ã€**å¤§è¯­è¨€æ¨¡å‹**å’Œ**Agentå·¥ä½œæµ**ç­‰å‰æ²¿æŠ€æœ¯ã€‚ç³»ç»Ÿä»æ”¿ç­–æ–‡æ¡£çˆ¬å–ã€è§£æã€å‘é‡åŒ–å­˜å‚¨ï¼Œåˆ°æ™ºèƒ½æ£€ç´¢ã€è¯­ä¹‰åˆ†æã€æŠ•èµ„å»ºè®®ç”Ÿæˆï¼Œå®ç°äº†æ”¿ç­–åˆ†æçš„å…¨æµç¨‹è‡ªåŠ¨åŒ–ã€‚

### æŠ€æœ¯äº®ç‚¹

- **MinerUæ–‡æ¡£è§£æå¼•æ“**ï¼šæ”¯æŒPDF/DOC/DOCX/OFDç­‰å¤šæ ¼å¼æ”¿ç­–æ–‡æ¡£çš„é«˜ç²¾åº¦è§£æå’Œç»“æ„åŒ–æå–
- **åˆ†å¸ƒå¼çˆ¬è™«ç³»ç»Ÿ**ï¼šå¤šçº¿ç¨‹å¼‚æ­¥çˆ¬å–æ”¿ç­–é™„ä»¶ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œæ™ºèƒ½å»é‡
- **Milvuså‘é‡æ•°æ®åº“**ï¼šç™¾ä¸‡çº§æ”¿ç­–æ–‡æ¡£çš„é«˜æ€§èƒ½å‘é‡æ£€ç´¢ï¼Œæ”¯æŒæ··åˆæŸ¥è¯¢å’Œç›¸ä¼¼åº¦æ’åº
- **BERTè¯­ä¹‰åŒ¹é…**ï¼šåŸºäºé¢„è®­ç»ƒæ¨¡å‹çš„è¡Œä¸šåˆ†ç±»å’Œè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—
- **Agentå·¥ä½œæµç¼–æ’**ï¼šæ¨¡å—åŒ–çš„AgentååŒå¤„ç†ï¼Œæ”¯æŒçµæ´»çš„ä»»åŠ¡ç¼–æ’å’Œç»“æœèšåˆ
- **LLMå¢å¼ºåˆ†æ**ï¼šé›†æˆç«å±±å¼•æ“å¤§æ¨¡å‹APIï¼Œå®ç°æ”¿ç­–å¢é‡åˆ†æå’ŒæŠ•èµ„å»ºè®®ç”Ÿæˆ

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **æ”¿ç­–æ–‡æ¡£é‡‡é›†**ï¼šè‡ªåŠ¨çˆ¬å–æ”¿åºœç½‘ç«™æ”¿ç­–æ–‡æ¡£åŠé™„ä»¶ï¼Œæ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼
- **æ–‡æ¡£æ™ºèƒ½è§£æ**ï¼šä½¿ç”¨MinerUå¼•æ“è§£æPDF/DOCç­‰æ ¼å¼ï¼Œæå–ç»“æ„åŒ–æ–‡æœ¬
- **å‘é‡åŒ–çŸ¥è¯†åº“**ï¼šå°†å†å²æ”¿ç­–æ–‡æ¡£åˆ‡åˆ†ã€å‘é‡åŒ–å¹¶å­˜å‚¨åˆ°Milvusæ•°æ®åº“
- **è¯­ä¹‰æ£€ç´¢å¢å¼º**ï¼šåŸºäºå‘é‡ç›¸ä¼¼åº¦çš„RAGæ£€ç´¢ï¼Œå¿«é€Ÿå®šä½ç›¸å…³å†å²æ”¿ç­–
- **è¡Œä¸šæ™ºèƒ½åˆ†ç±»**ï¼šä½¿ç”¨BERTæ¨¡å‹è¿›è¡Œä¸­ä¿¡è¡Œä¸šåˆ†ç±»ä½“ç³»çš„è‡ªåŠ¨åŒ¹é…
- **å¢é‡åˆ†æç”Ÿæˆ**ï¼šLLMå¯¹æ¯”å†å²æ”¿ç­–ï¼Œè‡ªåŠ¨ç”Ÿæˆæ”¿ç­–åˆ›æ–°ç‚¹å’Œå˜åŒ–åˆ†æ
- **æŠ•èµ„å»ºè®®è¾“å‡º**ï¼šç”Ÿæˆç»“æ„åŒ–WordæŠ¥å‘Šï¼ŒåŒ…å«æŠ•èµ„æœºä¼šã€æ¿å—é…ç½®ã€é£é™©æç¤º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

```bash
# 1. å¯åŠ¨Milvus
docker-compose -f docker-compose-milvus-only.yml up -d

# 2. æ¿€æ´»Pythonç¯å¢ƒ
conda activate quant
```

### ä¸¤æ­¥è¿è¡Œ

#### Step 1: å»ºç«‹RAGçŸ¥è¯†åº“

```bash
python run_full_pipeline.py
```

- è¯»å–å†å²æ”¿ç­–æ•°æ®
- å‘é‡åŒ–å­˜å…¥Milvus
- **è¾“å‡º**ï¼šMilvuså‘é‡åº“

#### Step 2: ç”ŸæˆæŠ•èµ„å»ºè®®æŠ¥å‘Š

```bash
python generate_insights.py
```

- è¯»å–æ–°æ”¿ç­–æ•°æ®
- RAGæ£€ç´¢ + å¢é‡åˆ†æ + ä¼šè®®åˆ†æ
- LLMç”ŸæˆæŠ•èµ„å»ºè®®
- **è¾“å‡º**ï¼šWordæŠ¥å‘Šï¼ˆ`output/report_*.docx`ï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
gent/
â”œâ”€â”€ main/                          # ä¸»è¦æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ build_knowledge_base.py   # å»ºç«‹çŸ¥è¯†åº“ï¼ˆåŸrun_full_pipeline.pyï¼‰
â”‚   â””â”€â”€ generate_report.py        # ç”ŸæˆæŠ¥å‘Šï¼ˆåŸgenerate_insights.pyï¼‰
â”‚
â”œâ”€â”€ agents/                        # Agentå·¥ä½œæµç³»ç»Ÿ
â”‚   â”œâ”€â”€ base.py                   # AgentåŸºç±»
â”‚   â”œâ”€â”€ industry_agent.py         # è¡Œä¸šåˆ†ç±»Agentï¼ˆBERTï¼‰
â”‚   â”œâ”€â”€ novelty_agent.py          # å¢é‡åˆ†æAgentï¼ˆLLMç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ investment_agent.py       # æŠ•èµ„åˆ†æAgent
â”‚   â””â”€â”€ enhanced_rag_agent.py    # RAGæ£€ç´¢Agent
â”‚
â”œâ”€â”€ core/                          # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ models.py                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ config.py                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ vector_db.py              # Milvuså‘é‡æ•°æ®åº“
â”‚   â””â”€â”€ clients/                  # LLMå®¢æˆ·ç«¯
â”‚       â””â”€â”€ volcengine_client.py  # ç«å±±å¼•æ“å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ utils/                        # å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ chunking.py               # æ–‡æ¡£åˆ‡åˆ†
â”‚
â”œâ”€â”€ scripts/                      # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ cleanup.py               # æ•°æ®åº“æ¸…ç†
â”‚   â””â”€â”€ test_milvus.py           # Milvusè¿æ¥æµ‹è¯•
â”‚
â”œâ”€â”€ report_generator.py          # æŠ¥å‘Šç”Ÿæˆå™¨ï¼ˆLLMç”ŸæˆæŠ•èµ„å»ºè®®ï¼‰
â”œâ”€â”€ citic_industries.py          # ä¸­ä¿¡è¡Œä¸šåˆ†ç±»
â”‚
â”œâ”€â”€ data/                        # æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ examples/                # ç¤ºä¾‹æ•°æ®
â”‚
â”œâ”€â”€ output/                      # è¾“å‡ºç›®å½•
â””â”€â”€ docs/                        # æ–‡æ¡£
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### LLMé…ç½®ï¼ˆconfig.pyï¼‰

```python
# ç«å±±å¼•æ“APIé…ç½®
VOLCENGINE_API_KEY = "your_key"
VOLCENGINE_MODEL = "deepseek-r1-250120"
VOLCENGINE_BASE_URL = "https://ark.cn-beijing.volces.com/api/v3"
```

---

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯æ¶æ„

### 1. æ•°æ®é‡‡é›†ä¸è§£æå±‚

#### MinerUæ–‡æ¡£è§£æå¼•æ“

- **å¤šæ ¼å¼æ”¯æŒ**ï¼šPDFã€DOCã€DOCXã€OFDã€XLSã€XLSXç­‰æ”¿ç­–æ–‡æ¡£æ ¼å¼
- **ç»“æ„åŒ–æå–**ï¼šä¿ç•™æ–‡æ¡£æ ‡é¢˜ã€æ®µè½ã€è¡¨æ ¼ç­‰ç»“æ„ä¿¡æ¯
- **OCRé›†æˆ**ï¼šæ”¯æŒæ‰«æç‰ˆPDFçš„æ–‡å­—è¯†åˆ«
- **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒå¤§è§„æ¨¡æ–‡æ¡£çš„å¹¶è¡Œè§£æå’Œè¿›åº¦ç®¡ç†

#### åˆ†å¸ƒå¼çˆ¬è™«ç³»ç»Ÿ

- **å¤šçº¿ç¨‹å¼‚æ­¥çˆ¬å–**ï¼šåŸºäºçº¿ç¨‹æ± çš„é«˜å¹¶å‘ä¸‹è½½ï¼Œæ”¯æŒæ•°åƒä¸ªé™„ä»¶çš„å¿«é€Ÿé‡‡é›†
- **æ™ºèƒ½å»é‡æœºåˆ¶**ï¼šåŸºäºURLå’Œæ–‡ä»¶å“ˆå¸Œçš„å»é‡ï¼Œé¿å…é‡å¤ä¸‹è½½
- **æ–­ç‚¹ç»­ä¼ **ï¼šæ”¯æŒçˆ¬å–ä»»åŠ¡çš„ä¸­æ–­æ¢å¤ï¼Œcheckpointæœºåˆ¶ä¿è¯æ•°æ®å®Œæ•´æ€§
- **æ ¼å¼è½¬æ¢**ï¼šè‡ªåŠ¨å°†DOCè½¬PDFï¼Œç»Ÿä¸€æ–‡æ¡£æ ¼å¼ä¾¿äºåç»­å¤„ç†

### 2. å‘é‡åŒ–å­˜å‚¨å±‚

#### Milvuså‘é‡æ•°æ®åº“æ¶æ„

- **ç‰ˆæœ¬**ï¼šMilvus 2.3+ï¼Œæ”¯æŒGPUåŠ é€Ÿçš„å‘é‡æ£€ç´¢
- **å­˜å‚¨å¼•æ“**ï¼šåŸºäºRocksDBçš„æŒä¹…åŒ–å­˜å‚¨ï¼Œæ”¯æŒæ•°æ®å¿«ç…§å’Œå¤‡ä»½
- **ç´¢å¼•ç®—æ³•**ï¼šHNSWï¼ˆHierarchical Navigable Small Worldï¼‰
  - Må‚æ•°ï¼š16ï¼ˆæ¯ä¸ªèŠ‚ç‚¹çš„æœ€å¤§è¿æ¥æ•°ï¼‰
  - efConstructionï¼š200ï¼ˆæ„å»ºç´¢å¼•æ—¶çš„æœç´¢æ·±åº¦ï¼‰
  - æ£€ç´¢å¤æ‚åº¦ï¼šO(log N)ï¼Œæ”¯æŒç™¾ä¸‡çº§å‘é‡çš„æ¯«ç§’çº§å“åº”
- **å‘é‡ç»´åº¦**ï¼š1792ç»´ï¼ˆä¸xiaobu-embedding-v2åŒ¹é…ï¼‰
- **è·ç¦»åº¦é‡**ï¼šIPï¼ˆInner Productï¼Œå†…ç§¯ï¼‰ï¼Œå½’ä¸€åŒ–å‘é‡ä¸‹ç­‰ä»·äºCosineç›¸ä¼¼åº¦
- **æ··åˆæŸ¥è¯¢**ï¼šæ”¯æŒå‘é‡æ£€ç´¢ + æ ‡é‡è¿‡æ»¤çš„ç»„åˆæŸ¥è¯¢
  - å…ƒæ•°æ®è¿‡æ»¤ï¼šè¡Œä¸šåˆ†ç±»ã€å‘å¸ƒæ—¶é—´ã€æ–‡æ¡£ç±»å‹ç­‰
  - è¡¨è¾¾å¼è¯­è¨€ï¼šæ”¯æŒå¤æ‚çš„å¸ƒå°”é€»è¾‘å’ŒèŒƒå›´æŸ¥è¯¢
- **åˆ†ç‰‡ç­–ç•¥**ï¼šæ”¯æŒCollectionåˆ†ç‰‡å’Œæ•°æ®åˆ†åŒºï¼Œå®ç°æ°´å¹³æ‰©å±•
- **æ•°æ®æ¨¡å‹**ï¼š
  - Chunkçº§ç´¢å¼•ï¼šæ¯ä¸ªæ–‡æ¡£åˆ‡åˆ†ä¸ºå¤šä¸ªchunkï¼Œç‹¬ç«‹å‘é‡åŒ–å’Œç´¢å¼•
  - å­—æ®µè®¾è®¡ï¼šchunk_id, doc_id, embedding(1792ç»´), content(VARCHAR 5000), chunk_index, chunk_type, title, timestamp, industriesç­‰
  - ä¸»é”®ï¼šchunk_idï¼ˆå”¯ä¸€æ ‡è¯†æ¯ä¸ªchunkï¼‰
- **æ€§èƒ½æŒ‡æ ‡**ï¼š
  - æ’å…¥ååï¼š10000+ vectors/sï¼ˆæ‰¹é‡æ’å…¥ï¼‰
  - æŸ¥è¯¢å»¶è¿Ÿï¼š<50msï¼ˆTop-K=20ï¼Œç™¾ä¸‡çº§æ•°æ®ï¼‰
  - å¬å›ç‡ï¼š>95%ï¼ˆHNSWå‚æ•°ä¼˜åŒ–åï¼‰

#### æ–‡æ¡£åˆ‡åˆ†ç­–ç•¥ï¼ˆChunkingï¼‰

- **åˆ‡åˆ†ç®—æ³•**ï¼šåŸºäºå¥å­è¾¹ç•Œçš„é€’å½’åˆ‡åˆ†ï¼ˆRecursiveCharacterTextSplitterï¼‰
  - ä¼˜å…ˆæŒ‰æ®µè½åˆ†å‰²ï¼ˆ\n\nï¼‰
  - å…¶æ¬¡æŒ‰å¥å­åˆ†å‰²ï¼ˆã€‚ï¼ï¼Ÿï¼‰
  - æœ€åæŒ‰å­—ç¬¦åˆ†å‰²ï¼ˆä¿åº•ç­–ç•¥ï¼‰
- **Chunkå¤§å°**ï¼š
  - ç›®æ ‡å¤§å°ï¼š500å­—ç¬¦ï¼ˆchunk_size=500ï¼‰
  - ç»å¯¹ä¸Šé™ï¼š1200å­—ç¬¦ï¼ˆabsolute_max=1200ï¼‰
  - å®é™…é™åˆ¶ï¼š450å­—ç¬¦ï¼ˆMilvus VARCHARå­—æ®µé™åˆ¶ï¼Œä¸embedding tokené™åˆ¶å¯¹é½ï¼‰
- **æ»‘åŠ¨çª—å£é‡å **ï¼š
  - é‡å é•¿åº¦ï¼š150å­—ç¬¦ï¼ˆoverlap=150ï¼‰
  - é‡å ç‡ï¼š30%ï¼ˆ150/500ï¼‰
  - ç›®çš„ï¼šä¿è¯è·¨chunkçš„è¯­ä¹‰è¿è´¯æ€§ï¼Œé¿å…å…³é”®ä¿¡æ¯è¢«åˆ‡æ–­
- **Tokenå¯¹é½**ï¼š
  - Embeddingæ¨¡å‹é™åˆ¶ï¼š512 tokens
  - ä¸­æ–‡å­—ç¬¦-Tokenæ¯”ä¾‹ï¼šçº¦1:1.2ï¼ˆè€ƒè™‘æ ‡ç‚¹å’Œç‰¹æ®Šå­—ç¬¦ï¼‰
  - å®‰å…¨é˜ˆå€¼ï¼š450å­—ç¬¦ â‰ˆ 540 tokensï¼ˆç•™æœ‰ä½™é‡ï¼‰
- **å…ƒæ•°æ®ç»§æ‰¿**ï¼š
  - æ¯ä¸ªchunkç»§æ‰¿æ–‡æ¡£çº§å…ƒæ•°æ®ï¼šdoc_id, title, publish_date, source, industries
  - Chunkçº§å…ƒæ•°æ®ï¼šchunk_idï¼ˆdoc_id + chunk_indexï¼‰, chunk_index, chunk_type
- **UTF-8ç¼–ç å¤„ç†**ï¼š
  - Milvus VARCHARæŒ‰å­—èŠ‚é•¿åº¦é™åˆ¶ï¼ˆUTF-8ç¼–ç ï¼‰
  - ä¸­æ–‡å­—ç¬¦ï¼š3å­—èŠ‚/å­—ç¬¦
  - æˆªæ–­ç­–ç•¥ï¼šæŒ‰å­—èŠ‚è¾¹ç•Œæˆªæ–­ï¼Œé¿å…ä¹±ç 

### 3. Agentå·¥ä½œæµå±‚

#### æ¨¡å—åŒ–Agentè®¾è®¡

ç³»ç»Ÿé‡‡ç”¨ä¸“ä¸šåŒ–AgentååŒå·¥ä½œçš„æ¶æ„ï¼Œæ¯ä¸ªAgentè´Ÿè´£ç‰¹å®šçš„åˆ†æä»»åŠ¡ï¼š

- **IndustryAgentï¼ˆè¡Œä¸šåˆ†ç±»ï¼‰**

  - åŸºäºBERTé¢„è®­ç»ƒæ¨¡å‹ï¼ˆchinese-bert-wwm-extï¼‰
  - è®¡ç®—æ”¿ç­–æ–‡æœ¬ä¸ä¸­ä¿¡30ä¸ªä¸€çº§è¡Œä¸šçš„è¯­ä¹‰ç›¸ä¼¼åº¦
  - æ”¯æŒå¤šçº§è¡Œä¸šåˆ†ç±»ï¼ˆä¸€çº§/äºŒçº§/ä¸‰çº§ï¼‰
  - ç¼“å­˜æœºåˆ¶åŠ é€Ÿé‡å¤æŸ¥è¯¢
- **EnhancedRAGAgentï¼ˆæ£€ç´¢å¢å¼ºï¼‰**

  - Chunkçº§å‘é‡æ£€ç´¢ï¼šåŸºäºcosineç›¸ä¼¼åº¦çš„Top-Kæ£€ç´¢
  - æ–‡æ¡£çº§èšåˆï¼šæŒ‰doc_idåˆå¹¶ç›¸å…³chunksï¼Œè¿˜åŸå®Œæ•´æ–‡æ¡£ä¸Šä¸‹æ–‡
  - è¡Œä¸šè¿‡æ»¤å¢å¼ºï¼šåŒè¡Œä¸šæ”¿ç­–ç›¸ä¼¼åº¦åŠ æƒï¼ˆ1.5x boostï¼‰
  - æ—¶é—´è¡°å‡ï¼šè€ƒè™‘æ”¿ç­–å‘å¸ƒæ—¶é—´çš„ç›¸å…³æ€§è¡°å‡
- **NoveltyAgentï¼ˆå¢é‡åˆ†æï¼‰**

  - LLMé©±åŠ¨çš„æ”¿ç­–å¯¹æ¯”åˆ†æ
  - è‡ªåŠ¨è¯†åˆ«æ”¿ç­–åˆ›æ–°ç‚¹ã€å˜åŒ–ç‚¹ã€å»¶ç»­ç‚¹
  - ç”Ÿæˆç»“æ„åŒ–çš„å¢é‡åˆ†ææŠ¥å‘Š
  - æ”¯æŒå¤šè½®å¯¹è¯å¼æ·±åº¦åˆ†æ
- **InvestmentAgentï¼ˆæŠ•èµ„åˆ†æï¼‰**

  - åŸºäºRAGæ£€ç´¢ç»“æœçš„æŠ•èµ„æœºä¼šæŒ–æ˜
  - æ¿å—é…ç½®å»ºè®®ç”Ÿæˆ
  - é£é™©å› ç´ è¯†åˆ«å’Œæç¤º
  - æŠ•èµ„æ—¶é—´çª—å£åˆ¤æ–­
- **ReportGeneratorï¼ˆæŠ¥å‘Šç”Ÿæˆï¼‰**

  - æ•´åˆæ‰€æœ‰Agentçš„åˆ†æç»“æœ
  - ç”Ÿæˆç»“æ„åŒ–Wordæ–‡æ¡£ï¼ˆpython-docxï¼‰
  - æ”¯æŒè‡ªå®šä¹‰æŠ¥å‘Šæ¨¡æ¿å’Œæ ·å¼
  - è‡ªåŠ¨æ·»åŠ ç›®å½•ã€é¡µçœ‰é¡µè„šç­‰å…ƒç´ 

### 4. è¯­ä¹‰ç†è§£å±‚

#### BERTè¯­ä¹‰åŒ¹é…å¼•æ“

- **é¢„è®­ç»ƒæ¨¡å‹**ï¼šchinese-bert-wwm-extï¼ˆChinese BERT with Whole Word Maskingï¼‰
  - æ¨¡å‹æ¶æ„ï¼šBERT-baseï¼ˆ12å±‚Transformerï¼Œ768ç»´éšè—å±‚ï¼‰
  - é¢„è®­ç»ƒè¯­æ–™ï¼šä¸­æ–‡ç»´åŸºç™¾ç§‘ + å…¶ä»–ä¸­æ–‡è¯­æ–™ï¼ˆ5GB+ï¼‰
  - è¯è¡¨å¤§å°ï¼š21128ï¼ˆä¸­æ–‡å­—ç¬¦ + WordPieceå­è¯ï¼‰
  - å…¨è¯é®ç½©ï¼šè®­ç»ƒæ—¶å¯¹å®Œæ•´è¯è¿›è¡Œé®ç½©ï¼Œæå‡ä¸­æ–‡è¯­ä¹‰ç†è§£
- **å¥å‘é‡æå–**ï¼š
  - æ–¹æ³•ï¼š[CLS] tokençš„æœ€åä¸€å±‚éšè—çŠ¶æ€ï¼ˆpooled outputï¼‰
  - ç»´åº¦ï¼š768ç»´ç¨ å¯†å‘é‡
  - åå¤„ç†ï¼šå¯é€‰çš„mean poolingæˆ–max pooling
- **ç›¸ä¼¼åº¦è®¡ç®—**ï¼š
  - åº¦é‡æ–¹å¼ï¼šCosine Similarity = cos(Î¸) = (AÂ·B) / (||A|| Ã— ||B||)
  - å–å€¼èŒƒå›´ï¼š[-1, 1]ï¼Œå®é™…åº”ç”¨ä¸­å½’ä¸€åŒ–åˆ°[0, 1]
  - é˜ˆå€¼è®¾å®šï¼š>0.75è§†ä¸ºé«˜ç›¸ä¼¼åº¦ï¼Œ0.5-0.75ä¸­ç­‰ç›¸ä¼¼åº¦
- **æ¨ç†ä¼˜åŒ–**ï¼š
  - æ‰¹é‡æ¨ç†ï¼šbatch_size=32ï¼Œå……åˆ†åˆ©ç”¨GPUå¹¶è¡Œè®¡ç®—
  - åºåˆ—é•¿åº¦ï¼šæœ€å¤§512 tokensï¼Œè¶…é•¿æˆªæ–­
  - ç²¾åº¦ï¼šFP16æ··åˆç²¾åº¦æ¨ç†ï¼ˆGPUï¼‰ï¼Œé€Ÿåº¦æå‡2x
  - ç¼“å­˜ç­–ç•¥ï¼šç›¸åŒæ–‡æœ¬çš„å‘é‡ç»“æœç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—
- **åº”ç”¨åœºæ™¯**ï¼š
  - è¡Œä¸šåˆ†ç±»ï¼šè®¡ç®—æ”¿ç­–æ–‡æœ¬ä¸30ä¸ªä¸­ä¿¡ä¸€çº§è¡Œä¸šæè¿°çš„ç›¸ä¼¼åº¦
  - è¯­ä¹‰æ£€ç´¢ï¼šè®¡ç®—æŸ¥è¯¢æ–‡æœ¬ä¸å€™é€‰æ–‡æ¡£çš„è¯­ä¹‰åŒ¹é…åº¦
  - å»é‡æ£€æµ‹ï¼šè¯†åˆ«å†…å®¹é«˜åº¦ç›¸ä¼¼çš„é‡å¤æ”¿ç­–æ–‡æ¡£

#### Embeddingå‘é‡åŒ–æŠ€æœ¯æ ˆ

- **æ¨¡å‹æ¶æ„**ï¼šxiaobu-embedding-v2ï¼ˆåŸºäºSentence-BERTæ¶æ„çš„ä¸­æ–‡ä¼˜åŒ–æ¨¡å‹ï¼‰
- **å‘é‡ç»´åº¦**ï¼š1792ç»´é«˜ç»´ç¨ å¯†å‘é‡è¡¨ç¤ºï¼Œæä¾›æ›´ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯
- **å½’ä¸€åŒ–å¤„ç†**ï¼šL2å½’ä¸€åŒ–ï¼ˆnormalize_embeddings=Trueï¼‰ï¼Œå°†å‘é‡æ˜ å°„åˆ°å•ä½è¶…çƒé¢
- **ç›¸ä¼¼åº¦åº¦é‡**ï¼šCosine Similarity = dot(v1, v2)ï¼Œå½’ä¸€åŒ–åç­‰ä»·äºå†…ç§¯ï¼Œè®¡ç®—æ•ˆç‡é«˜
- **Tokené™åˆ¶**ï¼šæœ€å¤§512 tokensè¾“å…¥ï¼ˆä¸­æ–‡çº¦450-500å­—ç¬¦ï¼‰ï¼Œè¶…é•¿æ–‡æœ¬è‡ªåŠ¨æˆªæ–­
- **æ‰¹é‡ç¼–ç **ï¼šæ”¯æŒbatch encodingï¼ŒGPUåŠ é€Ÿï¼ˆCUDAï¼‰ï¼Œæ˜¾è‘—æå‡å‘é‡åŒ–ååé‡
- **æ¨¡å‹åŠ è½½**ï¼šåŸºäºSentenceTransformeræ¡†æ¶ï¼Œæ”¯æŒæœ¬åœ°æ¨¡å‹ç¼“å­˜å’Œç¦»çº¿éƒ¨ç½²
- **ç²¾åº¦ä¼˜åŒ–**ï¼šFP32æµ®ç‚¹ç²¾åº¦ï¼Œä¿è¯å‘é‡æ£€ç´¢çš„å‡†ç¡®æ€§

### 5. LLMå¢å¼ºå±‚

#### ç«å±±å¼•æ“LLM APIé›†æˆ

- **æ¨¡å‹é€‰æ‹©**ï¼šDeepSeek-R1-250528ï¼ˆæ¨ç†ä¼˜åŒ–ç‰ˆæœ¬ï¼‰
  - æ¨¡å‹è§„æ¨¡ï¼šæœªå…¬å¼€ï¼ˆä¼°è®¡100B+å‚æ•°ï¼‰
  - ä¸Šä¸‹æ–‡çª—å£ï¼š32768 tokensï¼ˆçº¦24000ä¸­æ–‡å­—ç¬¦ï¼‰
  - è®­ç»ƒæ•°æ®ï¼šæˆªæ­¢2025å¹´1æœˆçš„å¤šè¯­è¨€è¯­æ–™
  - ç‰¹ç‚¹ï¼šå¼ºåŒ–å­¦ä¹ ä¼˜åŒ–ï¼Œæ¨ç†èƒ½åŠ›å¼ºï¼Œé€‚åˆå¤æ‚åˆ†æä»»åŠ¡
- **APIé…ç½®**ï¼š
  - Endpointï¼šhttps://ark.cn-beijing.volces.com/api/v3
  - è®¤è¯æ–¹å¼ï¼šAPI Keyï¼ˆBearer Tokenï¼‰
  - SDKï¼švolcenginesdkarkruntimeï¼ˆå®˜æ–¹Python SDKï¼‰
  - åè®®ï¼šOpenAIå…¼å®¹æ¥å£ï¼ˆChat Completions APIï¼‰
- **ç”Ÿæˆå‚æ•°**ï¼š
  - temperatureï¼š0.1-0.3ï¼ˆä½æ¸©åº¦ï¼Œå‡å°‘éšæœºæ€§ï¼Œä¿è¯è¾“å‡ºç¨³å®šæ€§å’Œä¸€è‡´æ€§ï¼‰
  - max_tokensï¼š32768ï¼ˆæœ€å¤§è¾“å‡ºé•¿åº¦ï¼Œæ”¯æŒé•¿ç¯‡æŠ¥å‘Šç”Ÿæˆï¼‰
  - top_pï¼š0.95ï¼ˆæ ¸é‡‡æ ·ï¼Œä¿ç•™ç´¯ç§¯æ¦‚ç‡95%çš„tokenå€™é€‰é›†ï¼‰
  - frequency_penaltyï¼š0.0ï¼ˆä¸æƒ©ç½šé‡å¤ï¼Œå…è®¸æœ¯è¯­é‡å¤å‡ºç°ï¼‰
  - presence_penaltyï¼š0.0ï¼ˆä¸æƒ©ç½šæ–°è¯é¢˜ï¼Œå…è®¸è‡ªç”±å±•å¼€ï¼‰
- **å¯é æ€§ä¿éšœ**ï¼š
  - é‡è¯•æœºåˆ¶ï¼šæŒ‡æ•°é€€é¿ï¼ˆ1s, 2s, 4s, 8s, 16sï¼‰ï¼Œæœ€å¤š5æ¬¡é‡è¯•
  - è¶…æ—¶è®¾ç½®ï¼š60sè¿æ¥è¶…æ—¶ï¼Œ300sè¯»å–è¶…æ—¶
  - é”™è¯¯å¤„ç†ï¼šåŒºåˆ†4xxå®¢æˆ·ç«¯é”™è¯¯ï¼ˆä¸é‡è¯•ï¼‰å’Œ5xxæœåŠ¡ç«¯é”™è¯¯ï¼ˆé‡è¯•ï¼‰
  - é™æµåº”å¯¹ï¼šæ£€æµ‹429çŠ¶æ€ç ï¼Œè‡ªåŠ¨å»¶è¿Ÿé‡è¯•
- **æµå¼è¾“å‡º**ï¼š
  - æ”¯æŒServer-Sent Eventsï¼ˆSSEï¼‰åè®®
  - å®æ—¶è¿”å›ç”Ÿæˆçš„tokenï¼Œæå‡ç”¨æˆ·ä½“éªŒ
  - æ”¯æŒä¸­æ–­å’Œå–æ¶ˆæ“ä½œ
- **Tokenè®¡è´¹**ï¼š
  - è¾“å…¥tokenï¼šæŒ‰å®é™…æ¶ˆè€—è®¡è´¹
  - è¾“å‡ºtokenï¼šæŒ‰å®é™…ç”Ÿæˆè®¡è´¹
  - æˆæœ¬ä¼˜åŒ–ï¼šç¼“å­˜å¸¸ç”¨promptï¼Œå‡å°‘é‡å¤è¾“å…¥

#### Promptå·¥ç¨‹ä¸ä¼˜åŒ–

- **è§’è‰²è®¾å®šï¼ˆRole Promptingï¼‰**ï¼š
  - System Messageï¼šè®¾å®šä¸º"èµ„æ·±é‡‘èæ”¿ç­–åˆ†æå¸ˆ"è§’è‰²
  - ä¸“ä¸šèƒŒæ™¯ï¼š10å¹´+æ”¿ç­–ç ”ç©¶ç»éªŒï¼Œç†Ÿæ‚‰å®è§‚ç»æµå’Œè¡Œä¸šåˆ†æ
  - è¾“å‡ºé£æ ¼ï¼šä¸“ä¸šã€å®¢è§‚ã€æ•°æ®é©±åŠ¨
- **Few-shotå­¦ä¹ **ï¼š
  - æä¾›2-3ä¸ªé«˜è´¨é‡ç¤ºä¾‹ï¼ˆè¾“å…¥-è¾“å‡ºå¯¹ï¼‰
  - ç¤ºä¾‹è¦†ç›–ä¸åŒæ”¿ç­–ç±»å‹ï¼ˆè´¢æ”¿ã€è´§å¸ã€äº§ä¸šç­‰ï¼‰
  - å¼•å¯¼æ¨¡å‹å­¦ä¹ è¾“å‡ºæ ¼å¼å’Œåˆ†ææ¡†æ¶
- **Chain-of-Thoughtï¼ˆæ€ç»´é“¾ï¼‰**ï¼š
  - å¼•å¯¼æ¨¡å‹åˆ†æ­¥æ¨ç†ï¼š"é¦–å…ˆ...å…¶æ¬¡...æœ€å..."
  - æ˜¾å¼è¦æ±‚ä¸­é—´æ­¥éª¤ï¼š"è¯·å…ˆæ€»ç»“æ”¿ç­–è¦ç‚¹ï¼Œå†åˆ†æå½±å“ï¼Œæœ€åç»™å‡ºå»ºè®®"
  - æå‡å¤æ‚åˆ†æä»»åŠ¡çš„å‡†ç¡®æ€§å’Œå¯è§£é‡Šæ€§
- **ç»“æ„åŒ–è¾“å‡ºçº¦æŸ**ï¼š
  - æ ¼å¼è¦æ±‚ï¼šMarkdownæ ¼å¼ï¼ŒåŒ…å«æ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼
  - é•¿åº¦æ§åˆ¶ï¼šå¢é‡åˆ†æ800-1500å­—ï¼ŒæŠ•èµ„å»ºè®®500-1000å­—
  - å¿…éœ€å­—æ®µï¼šæ”¿ç­–è¦ç‚¹ã€åˆ›æ–°ç‚¹ã€å½±å“åˆ†æã€æŠ•èµ„å»ºè®®ã€é£é™©æç¤º
- **ä¸Šä¸‹æ–‡æ³¨å…¥ï¼ˆContext Injectionï¼‰**ï¼š
  - RAGæ£€ç´¢ç»“æœï¼šTop-Kç›¸å…³å†å²æ”¿ç­–ï¼ˆæˆªæ–­åˆ°8000 tokensï¼‰
  - å…ƒæ•°æ®ï¼šæ”¿ç­–æ ‡é¢˜ã€å‘å¸ƒæ—¶é—´ã€å‘å¸ƒæœºæ„ã€è¡Œä¸šåˆ†ç±»
  - æ ¼å¼ï¼šXMLæ ‡ç­¾åŒ…è£¹ï¼Œä¾¿äºæ¨¡å‹è¯†åˆ«å’Œå¼•ç”¨
- **æ¸©åº¦ä¸é‡‡æ ·ç­–ç•¥**ï¼š
  - åˆ†æä»»åŠ¡ï¼štemperature=0.2ï¼ˆä½æ¸©åº¦ï¼Œä¿è¯å®¢è§‚æ€§ï¼‰
  - åˆ›æ„ä»»åŠ¡ï¼štemperature=0.5ï¼ˆä¸­ç­‰æ¸©åº¦ï¼Œå¢åŠ å¤šæ ·æ€§ï¼‰
  - Top-pé‡‡æ ·ï¼š0.95ï¼ˆä¿ç•™é«˜æ¦‚ç‡tokenï¼Œè¿‡æ»¤ä½è´¨é‡è¾“å‡ºï¼‰
- **Promptæ¨¡æ¿ç®¡ç†**ï¼š
  - æ¨¡æ¿åŒ–è®¾è®¡ï¼šä½¿ç”¨Jinja2æ¨¡æ¿å¼•æ“
  - å˜é‡æ›¿æ¢ï¼š{policy_content}, {rag_results}, {industry}ç­‰
  - ç‰ˆæœ¬æ§åˆ¶ï¼šGitç®¡ç†promptç‰ˆæœ¬ï¼Œæ”¯æŒA/Bæµ‹è¯•

### 6. ç³»ç»Ÿä¼˜åŒ–

#### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

- **å¤šçº§ç¼“å­˜æœºåˆ¶**ï¼š
  - L1ç¼“å­˜ï¼šå†…å­˜ç¼“å­˜ï¼ˆLRUï¼Œæœ€å¤§1000æ¡ï¼‰ï¼Œç¼“å­˜è¡Œä¸šåˆ†ç±»ç»“æœå’ŒBERTå‘é‡
  - L2ç¼“å­˜ï¼šç£ç›˜ç¼“å­˜ï¼ˆJSONæ–‡ä»¶ï¼‰ï¼ŒæŒä¹…åŒ–ç¼“å­˜ï¼Œé‡å¯åå¯å¤ç”¨
  - ç¼“å­˜é”®ï¼šåŸºäºå†…å®¹å“ˆå¸Œï¼ˆMD5ï¼‰ï¼Œä¿è¯å”¯ä¸€æ€§
  - å‘½ä¸­ç‡ï¼š>80%ï¼ˆé‡å¤æ”¿ç­–å’Œç›¸ä¼¼æ–‡æœ¬è¾ƒå¤šï¼‰
- **æ‰¹é‡å¤„ç†ï¼ˆBatchingï¼‰**ï¼š
  - å‘é‡åŒ–ï¼šbatch_size=64ï¼ŒGPUæ‰¹é‡ç¼–ç ï¼Œååé‡æå‡10x
  - APIè°ƒç”¨ï¼šåˆå¹¶å¤šä¸ªè¯·æ±‚ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”ï¼ˆRTTï¼‰
  - æ•°æ®åº“æ’å…¥ï¼šæ‰¹é‡æ’å…¥ï¼ˆbatch_size=1000ï¼‰ï¼Œå‡å°‘äº‹åŠ¡å¼€é”€
- **å¹¶è¡Œè®¡ç®—**ï¼š
  - å¤šçº¿ç¨‹ï¼šæ–‡æ¡£è§£æå’Œçˆ¬å–ä½¿ç”¨ThreadPoolExecutorï¼ˆmax_workers=16ï¼‰
  - å¤šè¿›ç¨‹ï¼šCPUå¯†é›†å‹ä»»åŠ¡ï¼ˆæ–‡æœ¬é¢„å¤„ç†ï¼‰ä½¿ç”¨ProcessPoolExecutor
  - GPUåŠ é€Ÿï¼šBERTå’ŒEmbeddingæ¨¡å‹æ¨ç†ä½¿ç”¨CUDA
- **å¼‚æ­¥IOï¼ˆAsync I/Oï¼‰**ï¼š
  - æ–‡ä»¶è¯»å†™ï¼šä½¿ç”¨aiofileså¼‚æ­¥è¯»å†™ï¼Œé¿å…é˜»å¡
  - ç½‘ç»œè¯·æ±‚ï¼šä½¿ç”¨aiohttpå¼‚æ­¥HTTPå®¢æˆ·ç«¯
  - æ•°æ®åº“æ“ä½œï¼šMilvusæ”¯æŒå¼‚æ­¥æŸ¥è¯¢ï¼ˆasync/awaitï¼‰
- **è¿æ¥æ± ç®¡ç†**ï¼š
  - Milvusè¿æ¥æ± ï¼šæœ€å¤§10ä¸ªè¿æ¥ï¼Œå¤ç”¨TCPè¿æ¥
  - HTTPè¿æ¥æ± ï¼šrequests.Session()ï¼ŒKeep-Aliveå¤ç”¨
  - è¶…æ—¶è®¾ç½®ï¼šè¿æ¥è¶…æ—¶10sï¼Œè¯»å–è¶…æ—¶60s
- **å†…å­˜ä¼˜åŒ–**ï¼š
  - æµå¼å¤„ç†ï¼šå¤§æ–‡ä»¶åˆ†å—è¯»å–ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜
  - åƒåœ¾å›æ”¶ï¼šæ˜¾å¼è°ƒç”¨gc.collect()ï¼Œé‡Šæ”¾å¤§å¯¹è±¡å†…å­˜
  - å‘é‡å‹ç¼©ï¼šå¯é€‰çš„PQï¼ˆProduct Quantizationï¼‰å‹ç¼©ï¼Œå‡å°‘å†…å­˜å ç”¨
- **ç´¢å¼•ä¼˜åŒ–**ï¼š
  - Milvusç´¢å¼•ï¼šHNSWå‚æ•°è°ƒä¼˜ï¼ˆM=16, efConstruction=200ï¼‰
  - æ•°æ®åº“ç´¢å¼•ï¼šdoc_idã€timestampç­‰å­—æ®µå»ºç«‹B-treeç´¢å¼•
  - æŸ¥è¯¢ä¼˜åŒ–ï¼šé¿å…å…¨è¡¨æ‰«æï¼Œä½¿ç”¨ç´¢å¼•è¦†ç›–æŸ¥è¯¢

#### å¯é æ€§ä¸å®¹é”™è®¾è®¡

- **å¼‚å¸¸å¤„ç†ä½“ç³»**ï¼š
  - åˆ†å±‚å¼‚å¸¸ï¼šåŒºåˆ†ä¸šåŠ¡å¼‚å¸¸ã€ç³»ç»Ÿå¼‚å¸¸ã€ç½‘ç»œå¼‚å¸¸
  - Try-Catchè¦†ç›–ï¼šæ‰€æœ‰å¤–éƒ¨è°ƒç”¨ï¼ˆAPIã€æ•°æ®åº“ã€æ–‡ä»¶IOï¼‰åŒ…è£¹å¼‚å¸¸å¤„ç†
  - é”™è¯¯æ—¥å¿—ï¼šä½¿ç”¨loggingæ¨¡å—ï¼Œè®°å½•å¼‚å¸¸å †æ ˆå’Œä¸Šä¸‹æ–‡ä¿¡æ¯
  - æ—¥å¿—çº§åˆ«ï¼šDEBUGï¼ˆå¼€å‘ï¼‰ã€INFOï¼ˆç”Ÿäº§ï¼‰ã€ERRORï¼ˆå¼‚å¸¸ï¼‰ã€CRITICALï¼ˆä¸¥é‡æ•…éšœï¼‰
- **æ•°æ®æ ¡éªŒï¼ˆValidationï¼‰**ï¼š
  - è¾“å…¥æ ¡éªŒï¼šä½¿ç”¨Pydanticæ¨¡å‹ï¼Œè‡ªåŠ¨æ ¡éªŒå­—æ®µç±»å‹å’Œæ ¼å¼
  - å¿…å¡«å­—æ®µï¼šdoc_id, content, titleç­‰æ ¸å¿ƒå­—æ®µéç©ºæ£€æŸ¥
  - é•¿åº¦é™åˆ¶ï¼šcontent â‰¤ 5000å­—ç¬¦ï¼Œtitle â‰¤ 500å­—ç¬¦
  - ç¼–ç æ£€æŸ¥ï¼šUTF-8ç¼–ç æ ¡éªŒï¼Œæ‹’ç»éæ³•å­—ç¬¦
- **é™çº§ç­–ç•¥ï¼ˆGraceful Degradationï¼‰**ï¼š
  - APIé™çº§ï¼šLLM APIå¤±è´¥æ—¶ï¼Œè¿”å›åŸºäºè§„åˆ™çš„ç®€åŒ–åˆ†æ
  - æ¨¡å‹é™çº§ï¼šGPUä¸å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°CPUæ¨ç†
  - æ£€ç´¢é™çº§ï¼šMilvusä¸å¯ç”¨æ—¶ï¼Œä½¿ç”¨æœ¬åœ°ç¼“å­˜æˆ–ç®€å•å…³é”®è¯åŒ¹é…
  - åŠŸèƒ½é™çº§ï¼šéæ ¸å¿ƒåŠŸèƒ½å¤±è´¥æ—¶ï¼Œè·³è¿‡è¯¥æ­¥éª¤ï¼Œç»§ç»­æ‰§è¡Œä¸»æµç¨‹
- **é‡è¯•æœºåˆ¶ï¼ˆRetry Logicï¼‰**ï¼š
  - æŒ‡æ•°é€€é¿ï¼š1s, 2s, 4s, 8s, 16sï¼ˆæœ€å¤š5æ¬¡ï¼‰
  - æŠ–åŠ¨ï¼ˆJitterï¼‰ï¼šéšæœºå»¶è¿ŸÂ±20%ï¼Œé¿å…é›·é¸£ç¾Šç¾¤æ•ˆåº”
  - å¹‚ç­‰æ€§ä¿è¯ï¼šé‡è¯•æ“ä½œä¸äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆå¦‚é‡å¤æ’å…¥ï¼‰
  - æ–­è·¯å™¨ï¼ˆCircuit Breakerï¼‰ï¼šè¿ç»­å¤±è´¥5æ¬¡åï¼Œæš‚åœ10åˆ†é’Ÿ
- **æ•°æ®ä¸€è‡´æ€§**ï¼š
  - äº‹åŠ¡æ”¯æŒï¼šMilvusæ‰¹é‡æ’å…¥ä½¿ç”¨äº‹åŠ¡ï¼Œä¿è¯åŸå­æ€§
  - å¹‚ç­‰æ€§ï¼šåŸºäºdoc_idå»é‡ï¼Œé¿å…é‡å¤æ’å…¥
  - æ ¡éªŒå’Œï¼šæ–‡ä»¶ä¸‹è½½åæ ¡éªŒMD5ï¼Œç¡®ä¿å®Œæ•´æ€§
  - å¤‡ä»½æ¢å¤ï¼šå®šæœŸå¤‡ä»½Milvusæ•°æ®ï¼Œæ”¯æŒå¿«é€Ÿæ¢å¤
- **ç›‘æ§ä¸å‘Šè­¦**ï¼š
  - æ€§èƒ½æŒ‡æ ‡ï¼šAPIå“åº”æ—¶é—´ã€å‘é‡æ£€ç´¢å»¶è¿Ÿã€å†…å­˜ä½¿ç”¨ç‡
  - ä¸šåŠ¡æŒ‡æ ‡ï¼šå¤„ç†æ–‡æ¡£æ•°ã€ç”ŸæˆæŠ¥å‘Šæ•°ã€é”™è¯¯ç‡
  - å‘Šè­¦è§„åˆ™ï¼šé”™è¯¯ç‡>5%ã€å“åº”æ—¶é—´>5sã€å†…å­˜ä½¿ç”¨>80%
  - å‘Šè­¦æ¸ é“ï¼šé‚®ä»¶ã€é’‰é’‰ã€Slackï¼ˆå¯é…ç½®ï¼‰
- **å¥åº·æ£€æŸ¥ï¼ˆHealth Checkï¼‰**ï¼š
  - Milvusè¿æ¥ï¼šå®šæœŸpingæ£€æŸ¥ï¼ˆæ¯30sï¼‰
  - APIå¯ç”¨æ€§ï¼šå®šæœŸè°ƒç”¨æµ‹è¯•æ¥å£ï¼ˆæ¯5åˆ†é’Ÿï¼‰
  - ç£ç›˜ç©ºé—´ï¼šæ£€æŸ¥å‰©ä½™ç©ºé—´>10GB
  - è‡ªåŠ¨æ¢å¤ï¼šæ£€æµ‹åˆ°æ•…éšœåï¼Œè‡ªåŠ¨é‡å¯æœåŠ¡

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

```python
from agents import IndustryAgent, NoveltyAgent, InvestmentAgent
from agents.enhanced_rag_agent import SimplifiedRAGAgent
from report_generator import ReportGenerator
from vector_db import MilvusVectorDatabase

# åˆå§‹åŒ–Agentå·¥ä½œæµ
db = MilvusVectorDatabase(collection_name="policy_documents", chunk_only=True)
rag_agent = SimplifiedRAGAgent(db)
industry_agent = IndustryAgent()
novelty_agent = NoveltyAgent()
investment_agent = InvestmentAgent()
report_generator = ReportGenerator()

# Agentå·¥ä½œæµå¤„ç†æ”¿ç­–
seg = PolicySegment(...)

# Step 1: è¡Œä¸šåˆ†ç±»
seg = industry_agent.classify_single(seg)

# Step 2: RAGæ£€ç´¢ç›¸å…³å†å²æ”¿ç­–
rag_results = rag_agent.search_enhanced(query_text=seg.content, top_k=10)

# Step 3: å¢é‡åˆ†æ
novelty_result = novelty_agent.process(seg, rag_results)

# Step 4: æŠ•èµ„åˆ†æ
investment_result = investment_agent.process(seg, rag_results)

# Step 5: ç”Ÿæˆå®Œæ•´æŠ¥å‘Š
doc = report_generator.generate_report(
    segment=seg,
    industry_result={},
    novelty_result=novelty_result,
    investment_result=investment_result,
    rag_results=rag_results
)
report_generator.save("output/report.docx")
```

---

## ğŸ› ï¸ å·¥å…·è„šæœ¬

```bash
# æ¸…ç†Milvusæ•°æ®åº“
python scripts/cleanup.py

# æµ‹è¯•Milvusè¿æ¥
python scripts/test_milvus.py
```

---

## ğŸ“Š è¾“å‡ºæ ¼å¼

ç”Ÿæˆçš„WordæŠ¥å‘ŠåŒ…å«ï¼š

1. **è¡Œä¸šåˆ†ç±»åˆ†æ** - ä¸­ä¿¡è¡Œä¸šåˆ†ç±»ç»“æœ
2. **æ”¿ç­–å¢é‡åˆ†æ** - LLMç”Ÿæˆçš„å¢é‡åˆ†ææŠ¥å‘Š
3. **ä¼šè®®å…³è”åˆ†æ** - æ£€æµ‹åˆ°çš„ä¼šè®®åŠç›¸å…³æ–‡æ¡£
4. **æŠ•èµ„å»ºè®®** - LLMç”Ÿæˆçš„æŠ•èµ„æœºä¼šã€æ¿å—é…ç½®ã€é£é™©æç¤º

---

## âœ… ç³»ç»Ÿè¦æ±‚

- Python 3.8+
- Milvus 2.3+
- CUDA (å¯é€‰ï¼Œç”¨äºGPUåŠ é€Ÿ)
- PyTorch
- transformers

---

## ğŸ“„ è®¸å¯è¯

å†…éƒ¨ä½¿ç”¨
